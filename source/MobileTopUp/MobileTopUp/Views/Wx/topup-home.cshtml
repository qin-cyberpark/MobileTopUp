<div class="container">
    <p></p>
    <!-- brand -->
    <div class="btn-group btn-group-justified" role="group" aria-label="...">
        <div class="btn-group" role="group">
            <button type="button" class="btn btn-brand btn-lg brand-selected" style="background-image:url(/img/spark.png)" brand-type="SPARK"></button>
        </div>
        <div class="btn-group" role="group">
            <button type="button" class="btn btn-brand btn-lg" style="background-image:url(/img/vodafone.png)" brand-type="VODAFONE"></button>
        </div>
    </div>
    <div class="btn-group btn-group-justified" role="group" aria-label="...">
        <div class="btn-group" role="group">
            <button type="button" class="btn btn-brand btn-lg" style="background-image:url(/img/2degree.png)" brand-type="2DEGREE"></button>
        </div>
        <div class="btn-group" role="group">
            <button type="button" class="btn btn-brand btn-lg" style="background-image:url(/img/skinny.png)" brand-type="SKINNY"></button>
        </div>
    </div>
    <!-- amount -->
    <div class="btn-group btn-group-justified" role="group" aria-label="...">
        <div class="btn-group" role="group">
            <button type="button" class="btn btn-amount btn-lg" amount-type="20">$20</button>
        </div>
        <div class="btn-group" role="group">
            <button type="button" class="btn btn-amount btn-lg no-left-border" amount-type="40">$40</button>
        </div>
        <div class="btn-group" role="group">
            <button type="button" class="btn btn-amount btn-lg no-left-border" amount-type="60">$60</button>
        </div>
        <div class="btn-group" role="group">
            <button type="button" class="btn btn-amount btn-lg no-left-border" amount-type="80">$80</button>
        </div>
        <div class="btn-group" role="group">
            <button type="button" class="btn btn-amount btn-lg no-left-border" amount-type="100">$100</button>
        </div>
    </div>
    <p style="height:30px"></p>
    <div class="btn-group btn-group-justified" role="group" aria-label="..." style="text-align:center">
        <div class="btn-group" role="group">
            <span id="payAmountCNY" class="lbl-amount">
                0 CNY
            </span>
            <button type="button" class="btn btn-pay" pay-type="WECHAT"><img src="/img/wechat.png"/></button>
        </div>
        <div class="btn-group" role="group">
            <span id="payAmountNZD" class="lbl-amount">
                0 NZD
            </span>
            <button type="button" class="btn btn-pay" pay-type="PECC"><img src="/img/pe.png"/></button>
        </div>
    </div>
    <div>
    </div>
    <div style="text-align:center">
        <button type="button" class="btn btn-pay" pay-type="PEA2A">skip payment</button>
    </div>
</div>
<script>
    var _price = [0, 20, 40, 60, 80, 100];
    var _exRateCNY = @ViewBag.ExRateCNY;
    var _exRateNZD = @ViewBag.ExRateNZD;
    var _discount = @ViewBag.Discount;
    var _brand = "@ViewBag.Brand";
    var _amount = @ViewBag.Amount;
    $(document).ready(function () {
        // Handler for .ready() called.
        //brand select
        $(".btn-brand").click(function () {
            $(".btn-brand").removeClass("brand-selected");
            $(this).addClass("brand-selected");
            _brand = $(this).attr("brand-type");
        });
        $(".btn-brand[brand-type='@ViewBag.Brand.ToUpper()']").click();

        //amount select
        $(".btn-amount").click(function () {
            $(".btn-amount").removeClass("amount-selected");
            $(this).addClass("amount-selected");
            showPayAmount($(this).attr("amount-type"));
        })
        $(".btn-amount[amount-type='@ViewBag.Amount']").click();

        //pay button
        $(".btn-pay").click(function () {
            var confirmUrl = "/Wx/topup/confirm/" + _brand + "/" + _amount + "/" + $(this).attr("pay-type");
            location.href = confirmUrl;
        })
    });

    function showPayAmount(amount_type) {
        var idx = 0;
        switch (amount_type) {
            case "20": idx = 1; break;
            case "40": idx = 2; break;
            case "60": idx = 3; break;
            case "80": idx = 4; break;
            case "100": idx = 5; break;
            default:return;
        }
        _amount = _price[idx];
        var nzd = _amount * _discount;
        var cny = nzd * _exRateCNY;
        $("#payAmountNZD").text(nzd.toFixed(2) + " NZD");
        $("#payAmountCNY").text(cny.toFixed(2) + " CNY");
    }
</script>